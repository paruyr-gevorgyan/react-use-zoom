var t=require("react"),e=function(){function t(t){this.svg=t||document.createElementNS("http://www.w3.org/2000/svg","svg"),this.vtm=this.createSVGMatrix(),this.x=0,this.y=0}var e=t.prototype;return e.clamp=function(t,e,n,r){var i=(window.innerWidth-r.width)/2,c=(window.innerHeight-r.height)/2,a=i*t+r.width*t-window.innerWidth,u=Math.min(1*this.vtm.e,0),o=Math.min(1*this.vtm.f,0),h=e>0?u:-i*t,s=this.vtm.e;s=Math.max(e>0?u:-a,this.vtm.e),s=Math.min(h,s);var w=c*t+r.height*t-window.innerHeight,v=n>0?o:-w,d=this.vtm.f;d=Math.min(n>0?o:-c*t,d),d=Math.max(d,v),this.vtm=this.createSVGMatrix().translate(s,d).scale(Math.max(this.vtm.a,1))},e.createSVGMatrix=function(){return this.svg.createSVGMatrix()},e.move=function(t,e,n,r,i){return this.vtm=this.createSVGMatrix().translate(this.x-t,this.y-e).scale(this.vtm.a),this.clamp(this.vtm.a,n,r,i),this.vtm},e.scale=function(t,e,n,r,i,c){this.vtm=this.createSVGMatrix().translate(n.x,n.y).scale(t,e).translate(-n.x,-n.y).multiply(this.vtm);var a=Math.max(this.vtm.a,1);return this.clamp(a,r,i,c),this.vtm},t}(),n=function(){function t(){this.touchA={clientX:0,clientY:0,t:0},this.touchB={clientX:0,clientY:0,t:0}}var e=t.prototype;return e.down=function(t,e){this.touchA={clientX:t.clientX,clientY:t.clientY,t:Date.now(),velocity:0},this.touchB={clientX:e.clientX,clientY:e.clientY,t:Date.now(),veloctiy:0}},e.calc=function(t,e){var n=t.clientX,r=t.clientY,i=Date.now(),c=n-e.clientX,a=r-e.clientY,u=i-e.t,o=Math.sqrt(c*c+a*a)/u;e.velocity=o,e.clientX=n,e.clientY=r,e.t=i},e.getVelocity=function(t,e){return this.calc(t,this.touchA),this.calc(e,this.touchB),this.touchA.velocity+this.touchB.velocity},t}(),r=function(t,e){return Math.hypot(t.pageX-e.pageX,t.pageY-e.pageY)};module.exports=function(){var i=t.useRef({initX:0,initY:0,newX:0,newY:0}),c=t.useRef(),a=t.useRef(),u=t.useRef(),o=t.useRef(new e),h=t.useRef(new n),s=t.useRef({time:0,x:0,run:!1}),w=t.useRef({scaling:!1,x1:0,x2:0,y1:0,y2:0,lastHypo:0,originX:0,originY:0,value:1,max:1}),v=t.useState(!1),d=v[0],l=v[1],m=function(t){t.preventDefault();var e=1+.1*(t.deltaY<0?1:-1),n=e*window.innerHeight/window.innerWidth;if(!(w.current.value*e>=w.current.max)){var r=(window.innerWidth-c.current.width*o.current.vtm.a)/2,i=(window.innerHeight-c.current.height*o.current.vtm.a)/2,a={x:r>0?window.innerWidth/2:t.pageX,y:i>0?window.innerHeight/2:t.pageY},h=o.current.scale(e,n,a,r,i,c.current);u.current.style.transform="translate("+h.e+"px,"+h.f+"px) scale("+h.d+")",w.current.value=h.d}};t.useEffect(function(){window.addEventListener("wheel",m,{passive:!1})},[]);var g=function(t){x(t.clientX,t.clientY)},f=function(){window.removeEventListener("mousemove",g),X()},p=function(t,e){i.current.initX=t,i.current.initY=e,o.current.x=o.current.vtm.e,o.current.y=o.current.vtm.f},x=function(t,e){if(!w.current.scaling){var n=(window.innerWidth-c.current.width*o.current.vtm.a)/2,r=(window.innerHeight-c.current.height*o.current.vtm.a)/2;i.current.newX=i.current.initX-t,i.current.newY=i.current.initY-e;var a=o.current.move(n>=0?0:i.current.newX,r>=0?0:i.current.newY,n,r,c.current);u.current.style.transform="matrix("+a.a+","+a.b+","+a.c+","+a.d+","+a.e+", "+a.f+")"}},X=function(){o.current.x-=i.current.newX,o.current.y-=i.current.newY,w.current.scaling=!1,a.current=o.current.vtm.d,w.current.lastHypo=0},Y=function(t){if(w.current.scaling){var e=t.touches;!function(t,e,n){var i=r(t,e),a=i/w.current.lastHypo;a=a>=1?1:-1;var s=1+.1*h.current.getVelocity(t,e)*a;if(!(w.current.value*s>=w.current.max)){var v=s*window.innerHeight/window.innerWidth,d=(window.innerWidth-c.current.width*o.current.vtm.a)/2,l=(window.innerHeight-c.current.height*o.current.vtm.a)/2,m={x:d>0?window.innerWidth/2:w.current.originX,y:l>0?window.innerHeight/2:w.current.originY},g=o.current.scale(s,v,m,d,l,c.current);u.current.style.transform="translate("+g.e+"px, "+g.f+"px) scale("+g.d+")",w.current.value=g.d,w.current.lastHypo=i,w.current.scaling=!0}}(e[0],e[1])}else x(t.touches[0].pageX,t.touches[0].pageY)},y=function t(e){X(),window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",t),window.removeEventListener("touchcancel",t)};return{events:{onLoad:function(){var t=u.current,e=t.naturalWidth;(e>window.innerWidth||t.naturalHeight>window.innerHeight)&&l(!0),w.current.max=Math.max(e/window.innerWidth,1),c.current=function(t,e,n,r){var i=Math.min(n/t,r/e);return{width:t*i,height:e*i,ratio:i}}(u.current.naturalWidth,u.current.naturalHeight,window.innerWidth,window.innerHeight)},onTouchStart:function(t){var e=2===t.touches.length,n=t.touches,i=n[0],v=n[1];w.current.scaling=e,u.current.classList.remove("tr"),e?(function(t,e){a.current=o.current.vtm.a;var n=[Math.min(t.pageX,e.pageX),Math.max(t.pageX,e.pageX)],i=[Math.min(t.pageY,e.pageY),Math.max(t.pageY,e.pageY)],c=(i[1]-i[0])/2+i[0];w.current.originX=(n[1]-n[0])/2+n[0],w.current.originY=c,w.current.lastHypo=Math.trunc(r(t,e))}(i,v),h.current.down(i,v)):((new Date).getTime()-s.current.time<250&&Math.abs(s.current.x-i.pageX)<=20&&(u.current.classList.add("tr"),function(t,e){var n=o.current.vtm.a,r=1+(n>1?n-1:.5)*(n>1?-1:1),i=r*window.innerHeight/window.innerWidth;if(!(w.current.value*r>=w.current.max)){var a=(window.innerWidth-c.current.width*Math.max(r*n,1))/2,h=(window.innerHeight-c.current.height*Math.max(r*n,1))/2,s={x:a>0?window.innerWidth/2:t,y:h>0?window.innerHeight/2:e},v=o.current.scale(r,i,s,a,h,c.current);w.current.value=v.d,u.current.style.transform="translate("+v.e+"px, "+v.f+"px) scale("+v.d+")"}}(i.pageX,i.pageY)),s.current.time=(new Date).getTime(),s.current.x=i.pageX,p(i.pageX,i.pageY)),window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",y),window.addEventListener("touchmove",Y),window.addEventListener("touchend",y)},onMouseDown:function(t){p(t.clientX,t.clientY),window.addEventListener("mousemove",g),window.addEventListener("mouseup",f)}},objectFit:d,imgRef:u}};
//# sourceMappingURL=index.js.map
